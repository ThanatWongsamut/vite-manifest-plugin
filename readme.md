# Vite Manifest Plugin

## Description

This Vite plugin modifies the manifest file generated by Vite, updating file paths based on the provided options. Specifically, it extends the paths in the manifest by adding a public path to them.

## NPM Package Stats

[![npm version](https://badge.fury.io/js/vite-manifest-plugin.svg)](https://www.npmjs.com/package/vite-manifest-plugin)
[![npm downloads](https://img.shields.io/npm/dw/vite-manifest-plugin)](https://www.npmjs.com/package/vite-manifest-plugin)
[![npm license](https://img.shields.io/npm/l/vite-manifest-plugin)](https://www.npmjs.com/package/vite-manifest-plugin)

## Prerequisites

- Node.js
- npm, yarn, or pnpm

## Installation

1. Install the plugin:

    ```bash
    npm install vite-manifest-plugin
    ```

    or

    ```bash
    yarn add vite-manifest-plugin
    ```

    or

    ```bash
    pnpm add vite-manifest-plugin
    ```

## Usage

### Vite Configuration

Add the plugin to your Vite configuration file (`vite.config.ts`):

```ts
// vite.config.ts
import { defineConfig } from 'vite';
import { viteManifestPlugin } from 'vite-manifest-plugin';

export default defineConfig({
  plugins: [
    viteManifestPlugin({
      fileName: 'manifest.json',
      publicPath: '/static/',
    }),
  ],
});
```

### Plugin Options

- `filename` (string): The name of the manifest file.
- `publicPath` (string):  The public path to prepend to the file paths in the manifest.

## Project Structure

```
vite-manifest-plugin/
├── .github/                    # GitHub configuration
│   └── workflows/              # GitHub Actions workflows
│       ├── ci.yml              # CI/CD pipeline
│       └── release.yml         # Auto release workflow
├── coverage/                   # Test coverage reports
├── dist/                       # Build output directory
├── node_modules/               # Dependencies
├── src/                        # Source code directory
│   ├── types/                  # TypeScript type definitions
│   │   ├── index.ts            # Type exports
│   │   └── index.test.ts       # Type tests
│   ├── index.ts                # Main plugin entry point
│   ├── index.test.ts           # Main plugin tests
│   ├── utils.ts                # Utility functions for plugin logic
│   ├── utils.test.ts           # Utility function tests
│   └── integration.test.ts     # Integration tests
├── eslint.config.js            # ESLint configuration
├── package.json                # Package configuration
├── pnpm-lock.yaml              # Package lock file
├── readme.md                   # Project documentation
├── tsconfig.json               # TypeScript configuration
├── tsup.config.ts              # Build configuration
└── vitest.config.ts            # Test configuration
```

## Development

### Available Scripts

- `pnpm build` - Build the package
- `pnpm test` - Run tests in watch mode
- `pnpm test:run` - Run tests once
- `pnpm test:coverage` - Run tests with coverage report
- `pnpm lint` - Lint the code
- `pnpm lint:fix` - Lint and fix issues automatically
- `pnpm clean` - Remove build artifacts
- `pnpm release` - Bump version and create a release

## CI/CD

This project uses GitHub Actions for continuous integration and deployment:

### Workflows

1. **CI/CD Pipeline** (`.github/workflows/ci.yml`):
   - Runs on every push and pull request to `main` and `develop` branches
   - Tests against Node.js versions 18, 20, and 22
   - Runs linting, testing, and building
   - Publishes to npm when a GitHub release is created

2. **Auto Release** (`.github/workflows/release.yml`):
   - Automatically creates GitHub releases when version in `package.json` changes
   - Triggers on pushes to `main` branch

### Publishing Process

For maintainers to publish a new version:

1. Create a new branch for the version update:
   ```bash
   git checkout -b release/vX.X.X
   ```

2. Update the version in `package.json`:
   ```bash
   pnpm version patch  # for patch version
   pnpm version minor  # for minor version
   pnpm version major  # for major version
   ```

3. Commit and push the version change:
   ```bash
   git add package.json
   git commit -m "chore: bump version to vX.X.X"
   git push origin release/vX.X.X
   ```

4. Create a pull request to merge into `main` branch

5. Once merged, the workflow will automatically:
   - Create a GitHub release
   - Publish the package to npm

## Contributing

1. Fork the repository.
2. Create a new branch (`git checkout -b feature-branch`).
3. Make your changes.
4. Commit your changes (`git commit -m 'Add some feature'`).
5. Push to the branch (`git push origin feature-branch`).
6. Open a pull request.

## Acknowledgements

- [Vite](https://vitejs.dev/)
- [TypeScript](https://www.typescriptlang.org/)
- [ESLint](https://eslint.org/)
- [Vitest](https://vitest.dev/)
